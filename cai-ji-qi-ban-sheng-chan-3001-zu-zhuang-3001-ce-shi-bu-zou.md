# 生产PCB板

嘉立创下单（采集器20170521.PcbDoc）

> 注意：这块板子是没有原理图的粗糙底板，虽然目前工程师做了新的升级（2.0），但是由于对升级后版本没有信心，仍然延续着0521这个版本的生产和使用。

# 元器件购买

## 1.嘉立创

## 2.非嘉立创

**环形电感**

[https://item.taobao.com/item.htm?spm=a1z09.2.0.0.1f30a53ffzO8sk&id=532647306734&\_u=bpm3qi61d8&qq-pf-to=pcqq.c2c](https://item.taobao.com/item.htm?spm=a1z09.2.0.0.1f30a53ffzO8sk&id=532647306734&_u=bpm3qi61d8&qq-pf-to=pcqq.c2c)

> 规格：环形，39uH

**0305升压模块**

[https://item.taobao.com/item.htm?spm=a210c.1.0.0.5fd9c1c6lvafiT&id=548079646981](https://item.taobao.com/item.htm?spm=a210c.1.0.0.5fd9c1c6lvafiT&id=548079646981)

> 电源B0305LS-1W的可以么？性能一样，引脚封装都一样，都是金升阳的。就是后缀有点区别。
>
> B0305LS-1WR2这个后缀的没现货。B0305LS-1W今天发货。有一批买的后者

# 加工厂焊接

找到焊接供应商（手工焊或钢网），将主板、元器件分类、正反面丝印图一起快递过去，约3个工作日能焊接完成。以下焊接步骤是给供应商参考的（都是我们自己实际验证过的）

## **焊接步骤**

注意：

> U5芯片是W25Q64，不需要焊接

产品分为两个类型：网关和采集器。网关不需要焊接485电路，采集器不需要焊接网络模块电路。

## 后续焊接和组装

|  |  |  |
| :--- | :--- | :--- |
| 开关盖 |  |  |
| 天线 |  |  |
| 连接探头 |  |  |
| 板子上贴编号 |  |  |
|  |  |  |

# 采集板烧写程序

1.准备好采集板、烧写机（特定电脑）、烧写线（ARM）。

2.采集板灯朝下，烧写线的线头对准采集板针孔，线头按红线左紫线右插入。

3.打开电脑keil uvision 5软件（界面如下）。

4.击菜单栏project，open project，flowunitever 2，gateway uvproject，创建一个新project。

5.点击右侧任务栏的master.c，找最新一行，如此图58行，将等号后面的数字重新编号。

6.点击菜单栏project，build targe，弹出框点击确定。

7.看左下码区查看为0 error（s），0 warning（s）才可继续烧写。

8.点击菜单栏debug，start，开始烧写。

9.若无法烧写，请检重新检查采集板。

![](http://ww1.sinaimg.cn/large/006WtR4dgy1fjfkoe3c61j30fe0b0wiu.jpg)

# 测试

```
烧写顺序：
俯视，网口朝自己，DIO端子为最左（红）。
```

|  | 测试通过的标准 |  |
| :--- | :--- | :--- |
| 烧写测试 | 能烧写、线上看到温度数据正常 | 烧写时SWD顺序： |
| 仅hi适用于采集器：流量计连接测试 | 平台上能读取到数据 | 485端子顺序从左至右：AB地 |
| 仅适用于网关：网口测试 | 平台上能看到网关心跳包 |  |
| 连续运行测试 |  |  |

## 网关新编号对应的平台项目新建流程

新建项目 - 取名 网关编号

生成和打印二维码

扫描二维码确认

# 记录错误

## 手工焊厂\(sz 2017年8月生产一批\)的错误

| 问题 | 解决方法 |
| :--- | :--- |
| R25没有焊接 | 补焊一个1206零欧电阻 |
| D8没有焊接 | 补焊BAT54C |
| F1没有焊接 | 补焊一个保险丝（30V或50V 0.5A均可），这个不焊的话无法烧写 |
|  |  |
|  |  |



